<!DOCTYPE html>
<html>
<head>
<style>
	html,body{
		margin:0;
        padding:0;
	}
	body {
  line-height:1.6;
  height: 100vh;
  overflow:hidden; 
}
.sidenav {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 1000000;
  top: 0;
  left: 0;
  background-color: #111;
  overflow-x: hidden;
  transition: 0.5s;
  padding-top: 60px;
  text-align:center;
}

.sidenav a {
  padding: 20px 20px 20px 32px;
  text-decoration: none;
  font-size: 40px;
  color: #818181;
  display: block;
  transition: 0.3s;

}

.sidenav a:hover{
  color: #1286a8;
}

.sidenav .closebtn {
  position: absolute;
  top: 0;
  right: 25px;
  font-size: 36px;
  margin-left: 50px;
}

@media screen and (max-height: 100%) {
  .sidenav {padding-top: 0px;}
  .sidenav a {font-size: 18px;}
}
.container{
    position:fixed;
    width:100%; 
    height:100%;
    overflow-y:scroll;
    scroll-behavior: smooth;
    scroll-snap-type:y mandatory;
}
section{
    
    
    flex-direction:column; 
    height:100vh; 
    width:100%; 
    scroll-snap-align:center; 
}
section.first_run{
    background:url("runner-picture1.jpg") no-repeat center center/cover; 
     
}
section.second_run{
    background:url("runner-picture2.jpg") no-repeat center center/cover;
}
#graph1 {
	border-radius: 25px;
	opacity:0.5;
position:absolute;
width: 40%;
height: 30%;  
top: 10%;
left:8%;
border: 4px solid white;
}
#graph2 {
	border-radius: 25px;
	opacity:0.5;
position:absolute;
width: 40vw;
height: 30vh;  
top: 60%;
left:8%;
border: 4px solid white ;
}
#Desc{
	position:relative; 
	top:10%;
	left:39%; 
}

#someButton{
	position:relative; 
	top:20%;
	left:50%; 

	

}
#container-for-autogenerated{
	position:absolute; 
	top:3%;
	left:10%;
	width:30vw;
	height:5vh; 
	border: 3px solid white;
}

/*THE SECOND ONE*/

#graph1-2 {
	border-radius: 25px;
	opacity:0.5;
position:absolute;
width: 40%;
height: 30%;  
top: 110%;
left:8%;
border: 4px solid white ;
}
#graph2-2 {
	border-radius: 25px;
	opacity:0.5;
position:absolute;
width: 40vw;
height: 30vh;  
top: 160%;
left:8%;
border: 4px solid white;
}

#container-for-autogenerated2{
	position:absolute; 
	top:103%;
	left:10%;
	width:30vw;
	height:5vh; 
	border: 3px solid white;
}


</style> 
<script> 
 function openNav() {
  document.getElementById("mySidenav").style.width = "100%";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}

</script>
<meta charset="UTF-8">
<title>Compare runs</title>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
<!--  <link rel="stylesheet" type="text/css"
	href = "path/to/chartjs/dist/Chart.min.css" > -->
</head>
</head>
<body>
<span style="font-size:50px;position:absolute;overflow:auto;cursor:pointer;top:0px;left:3%;z-index: 10000000;color:teal" onclick="openNav()">&#9776;</span>

    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="overview.html">Overview</a>
        <a href="overviewsecondversion.html">Home</a>
        <a href="login.html">Login</a>
        <a href="CreateAccount.html">Register</a>
        <a href="MyRuns.html">MyRuns</a>
        <a href="help.html">Help</a>
        
      </div>
 <div class ="container">
    <section class ="first_run">
	<button id="someButton" onclick="onWhatToCompare(&quot;average_pace&quot;); return false;"> Pace</button>
    <button id="someButton" onclick="onWhatToCompare(&quot;duration&quot;);"> Duration</button>
    <button id="someButton" onclick="onWhatToCompare(&quot;steps&quot;);"> Steps</button>
    <button id="Desc" onclick="ascOrDsc(0); return false;">Descending</button>
	<button id="Desc" onclick="ascOrDsc(1); return false;">Ascending</button>
	 <button id="Desc" onclick="clean(); return false;">Clear Window</button>
	<div id ="container-for-autogenerated">
		
	</div>
        
            <div id="graph1">
             <canvas id="myChart" width="60vw" height="25vh"></canvas>
            </div>
            <div id="graph2">
            </div>

    </section>
    
    
<!--  <div id="runslist">
</div>-->
 <!--  <div id="graph">-->
   
    <!--  </div>
    <button id="someButton" onclick="onWhatToCompare(&quot;average_pace&quot;); return false;"> Pace</button>
    <button id="someButton" onclick="onWhatToCompare(&quot;duration&quot;);"> Duration</button>
    <button id="someButton" onclick="onWhatToCompare(&quot;steps&quot;);"> Steps</button>
    <button id="Desc" onclick="ascOrDsc(0); return false;">Descending</button>
    <button id="Desc" onclick="ascOrDsc(1); return false;">Ascending</button>
    <button id="Desc" onclick="clean(); return false;">Clear Window</button>-->
    
    <div id="screenToShow"> You have selected: </div>
    <script>
    var username = "CvdB";
    var numrun = " ";
    var countruns = 0;
    var runsselected=[];
    var dataToCompare=[];
    var toCompare="";
    var ascdesc=2;
       window.onload= function createButtons(){
    	   console.log(username);
    	var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function() {
			//console.log(this.readyState + " " + this.status);
			if (this.readyState == 4 && this.status == 200) {
				//--produe=ce buttons
				var count = parseInt(JSON.parse(this.responseText));
				countruns = count;
				var produceButtons = "";
				for(var i=1;i<=count;i++){
					produceButtons = produceButtons+"<button id="+"\"runbut\""+";  onclick =\"saveRunNumber("+i+"); return false;\">Run"+i+"</button>";
				}
				document.getElementById("container-for-autogenerated").innerHTML = produceButtons;
				
			}
		}
		xhr
				.open(
						"GET",
						"http://localhost:8080/TRIMM_visualizing_runners_data_42/rest/data/count?username="+username,
						true);
		xhr.send();
    }
       
       function clean(){
    	   console.log("clean");
    	   while(runsselected>0){
    	   runsselected.pop();
    	   }
    	   while(runsselected>0){
    		   dataToCompare.pop();
        	   }
    	   toCompare="";
    	   ascdesc=2;
    	   barGraph(runsselected,dataToCompare);
    	   
       }
    function saveRunNumber(num){
    	console.log("I enter save run number");
    	runsselected.push("run"+""+num);
    	console.log("Runs selected "+runsselected)
    	document.getElementById("screenToShow").innerHTML=document.getElementById("screenToShow").innerHTML+"   "+"run"+""+num;
    	retreiveOneDataToCompare(num,toCompare);
    	
    	
    
    }
    function onWhatToCompare(onwhat){
    	console.log("I enter on what to compare "+onwhat);
    	toCompare=onwhat;
    	document.getElementById("screenToShow").innerHTML=document.getElementById("screenToShow").innerHTML+"   "+onwhat;
    }
    function ascOrDsc(onwhat){
    	console.log("I enter on what to compare"+onwhat);
    	ascdesc=onwhat;
    	if(onwhat==0){
    	document.getElementById("screenToShow").innerHTML=document.getElementById("screenToShow").innerHTML+"   "+"Descending";
    	}else{
    		document.getElementById("screenToShow").innerHTML=document.getElementById("screenToShow").innerHTML+"   "+"Ascending";
    	}
    }
    
   
    function retreiveOneDataToCompare(run,onwhat){
    	var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function() {
			console.log(this.readyState + " " + this.status);
			if (this.readyState == 4 && this.status == 200) {
				console.log(this.responseText);
				var d = parseInt(this.responseText);
				dataToCompare.push(d);
				console.log("DataToCompare "+dataToCompare);
				sort(runsselected,dataToCompare);
		    	barGraph(runsselected,dataToCompare);
				
			}
		}
		xhr
				.open(
						"GET",
						"http://localhost:8080/TRIMM_visualizing_runners_data_42/rest/data/"+onwhat+"?username="+username+"&run="+run,
						true);
		xhr.send();
    	
    }
    function sort(runsar,dataar){
    	console.log("I enter the sort");
    	if(ascdesc==1){
    	for(var i=0;i<dataar.length;i++){
    		for(var j=0;j<dataar.length;j++){
    		if(dataar[j]>dataar[j+1]){
    			var temp = dataar[j];
    			dataar[j]=dataar[j+1];
    			dataar[j+1]=temp;
    			var temp1 = runsar[j];
    			runsar[j]=runsar[j+1];
    			runsar[j+1]=temp1;
    		}
    	}
    }
    }else if(ascdesc==0){
    	for(var i=0;i<dataar.length;i++){
    		for(var j=0;j<dataar.length;j++){
    		if(dataar[j]<dataar[j+1]){
    			var temp = dataar[j];
    			dataar[j]=dataar[j+1];
    			dataar[j+1]=temp;
    			var temp1 = runsar[j];
    			runsar[j]=runsar[j+1];
    			runsar[j+1]=temp1;
    		}
    	}
    }
    }
    }

    
    function barGraph(runs,values){
    	console.log("I enter the graph");
    	console.log("Runs"+runs);
    	console.log("Values"+values);
    	var ctx = document.getElementById('myChart').getContext('2d');

		//the chart starts here
		var myChart = new Chart(ctx, {
			type : 'bar',
			data : {
				labels : runs,
				datasets : [ {
					label : 'Compare runs by something',
					data : values,

					borderWidth : 1
				} ]
			},
			options : {
				scales : {
					yAxes : [ {
						ticks : {
							beginAtZero : true
						}
					} ]
				}
			}
		});
    }
    
    </script>
    
    <script>
   /* var run1;
    var run2;
    var variable1;
    var variable2;
    
    function lineCompareVariables(){
    	var ctx1 = document.getElementById('myChart1').getContext('2d');
		//the chart starts here
		var myChart = new Chart(ctx1, {
			type : 'line',
			data : {
				labels : time,
				datasets : [ {
					label : 'Steps to variables',
					data : secvar,

					borderWidth : 1
				},{
					labels : time,
					datasets : [ {
						label : 'Steps to variables',
						data : secvar,

						borderWidth : 1
				} ]
			},
			options : {
				scales : {
					yAxes : [ {
						ticks : {
							beginAtZero : true
						}
					} ]
				}
			}
		});
    }*/
    </script>

</body>
</html>